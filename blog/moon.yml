language: go
tasks:
  dev:
    command: go run github.com/gohugoio/hugo@v0.152.0 server --minify -D -E -F
    preset: server
  new-post:
    command: go run github.com/gohugoio/hugo@v0.152.0 new
    preset: server
  build:
    command: go run github.com/gohugoio/hugo@v0.152.0 --minify
    inputs:
      - archetypes/**/*
      - assets/**/*
      - config/**/*
      - content/**/*
      - static/**/*
      - themes/**/*
      - hugo.toml
      - config/**/*
    outputs:
      - public/**/*
    env:
      HUGO_ENVIRONMENT: production
      HUGO_ENV: production
  clean:
    command: rm -rf public
layer: application
